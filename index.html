<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="icon" href="favicon.png">
	<meta charset="UTF-8">
	<title>Organizaciones UP</title>
</head>
<body>

<!-- jQuery loading -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

<!-- current page class formatting -->
<script>
	$(function() {
	  $('a').each(function() {
	    if ($(this).prop('href') == window.location.href) {
	      $(this).addClass('current');
	    }
	  });
	});
</script>

<!-- get external IP -->
<script src="http://l2.io/ip.js?var=externalIP"></script>

<!-- data collection scripts -->
<script>

    // global variables
	var latitude = '';
	var longitude = '';
	var accuracy = '';
	var screenSize = '';
	var browser = '';
	var browserVersion = '';
	var majorVersion = '';
	var mobile = '';
	var os = '';
	var osVersion = '';
	var cookieEnabled = '';
	var windowSize = '';
	var timestamp = '';
	
	(function (window) {{
        
        // get screen size
        if (screen.width) {
            var width = (screen.width) ? screen.width : '';
            var height = (screen.height) ? screen.height : '';
            screenSize += '' + width + " x " + height;
        }

        // get browser, browserVersion and majorVersion
        var nVer = navigator.appVersion;
        var nAgt = navigator.userAgent;
        browser = navigator.appName;
        browserVersion = '' + parseFloat(navigator.appVersion);
        majorVersion = parseInt(navigator.appVersion, 10);
        var nameOffset, verOffset, ix;

        if ((verOffset = nAgt.indexOf('Opera')) != -1) {
            browser = 'Opera';
            browserVersion = nAgt.substring(verOffset + 6);
            if ((verOffset = nAgt.indexOf('Version')) != -1) {
                browserVersion = nAgt.substring(verOffset + 8);
            }
        }

        if ((verOffset = nAgt.indexOf('OPR')) != -1) {
            browser = 'Opera';
            browserVersion = nAgt.substring(verOffset + 4);
        }

        else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {
            browser = 'Microsoft Internet Explorer';
            browserVersion = nAgt.substring(verOffset + 5);
        }

        else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {
            browser = 'Chrome';
            browserVersion = nAgt.substring(verOffset + 7);
        }

        else if ((verOffset = nAgt.indexOf('Safari')) != -1) {
            browser = 'Safari';
            browserVersion = nAgt.substring(verOffset + 7);
            if ((verOffset = nAgt.indexOf('Version')) != -1) {
                browserVersion = nAgt.substring(verOffset + 8);
            }
        }

        else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {
            browser = 'Firefox';
            browserVersion = nAgt.substring(verOffset + 8);
        }

        else if (nAgt.indexOf('Trident/') != -1) {
            browser = 'Microsoft Internet Explorer';
            browserVersion = nAgt.substring(nAgt.indexOf('rv:') + 3);
        }

        else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {
            browser = nAgt.substring(nameOffset, verOffset);
            browserVersion = nAgt.substring(verOffset + 1);
            if (browser.toLowerCase() == browser.toUpperCase()) {
                browser = navigator.appName;
            }
        }

        if ((ix = browserVersion.indexOf(';')) != -1) browserVersion = browserVersion.substring(0, ix);
        if ((ix = browserVersion.indexOf(' ')) != -1) browserVersion = browserVersion.substring(0, ix);
        if ((ix = browserVersion.indexOf(')')) != -1) browserVersion = browserVersion.substring(0, ix);

        majorVersion = parseInt('' + browserVersion, 10);
        if (isNaN(majorVersion)) {
            browserVersion = '' + parseFloat(navigator.appVersion);
            majorVersion = parseInt(navigator.appVersion, 10);
        }

        // get mobile
        mobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);

        // get cookieEnabled
        cookieEnabled = (navigator.cookieEnabled) ? true : false;

        if (typeof navigator.cookieEnabled == 'undefined' && !cookieEnabled) {
            document.cookie = 'testcookie';
            cookieEnabled = (document.cookie.indexOf('testcookie') != -1) ? true : false;
        }

        // get os and osVersion
        var clientStrings = [
            {s:'Windows 10', r:/(Windows 10.0|Windows NT 10.0)/},
            {s:'Windows 8.1', r:/(Windows 8.1|Windows NT 6.3)/},
            {s:'Windows 8', r:/(Windows 8|Windows NT 6.2)/},
            {s:'Windows 7', r:/(Windows 7|Windows NT 6.1)/},
            {s:'Windows Vista', r:/Windows NT 6.0/},
            {s:'Windows Server 2003', r:/Windows NT 5.2/},
            {s:'Windows XP', r:/(Windows NT 5.1|Windows XP)/},
            {s:'Windows 2000', r:/(Windows NT 5.0|Windows 2000)/},
            {s:'Windows ME', r:/(Win 9x 4.90|Windows ME)/},
            {s:'Windows 98', r:/(Windows 98|Win98)/},
            {s:'Windows 95', r:/(Windows 95|Win95|Windows_95)/},
            {s:'Windows NT 4.0', r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},
            {s:'Windows CE', r:/Windows CE/},
            {s:'Windows 3.11', r:/Win16/},
            {s:'Android', r:/Android/},
            {s:'Open BSD', r:/OpenBSD/},
            {s:'Sun OS', r:/SunOS/},
            {s:'Linux', r:/(Linux|X11)/},
            {s:'iOS', r:/(iPhone|iPad|iPod)/},
            {s:'Mac OS X', r:/Mac OS X/},
            {s:'Mac OS', r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},
            {s:'QNX', r:/QNX/},
            {s:'UNIX', r:/UNIX/},
            {s:'BeOS', r:/BeOS/},
            {s:'OS/2', r:/OS\/2/},
            {s:'Search Bot', r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}
        ];

        for (var id in clientStrings) {
            var cs = clientStrings[id];
            if (cs.r.test(nAgt)) {
                os = cs.s;
                break;
            }
        }

        if (/Windows/.test(os)) {
            osVersion = /Windows (.*)/.exec(os)[1];
            os = 'Windows';
        }

        switch (os) {
            case 'Mac OS X':
                osVersion = /Mac OS X (10[\.\_\d]+)/.exec(nAgt)[1];
                break;

            case 'Android':
                osVersion = /Android ([\.\_\d]+)/.exec(nAgt)[1];
                break;

            case 'iOS':
                osVersion = /OS (\d+)_(\d+)_?(\d+)?/.exec(nVer);
                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);
                break;
        }
    }

	}(this));

    // get windowSize
    windowSize = window.innerWidth + ' x ' + window.innerHeight;

    // get timestamp
    var now = new Date();
    
    var date = [ now.getMonth() + 1, now.getDate(), now.getFullYear() ];
    var time = [ now.getHours(), now.getMinutes(), now.getSeconds() ];
    var suffix = ( time[0] < 12 ) ? "AM" : "PM";
    
    time[0] = ( time[0] < 12 ) ? time[0] : time[0] - 12;
    time[0] = time[0] || 12;

    for ( var i = 1; i < 3; i++ ) {
        if ( time[i] < 10 ) {
            time[i] = "0" + time[i];
        }
    }
  
    timestamp = date.join("/") + " " + time.join(":") + " " + suffix;

    //// TODO: if user is sharing location, then do this POST...

    // get latitude, longitude and accuracy
    navigator.geolocation.getCurrentPosition(function(location) {
        latitude = location.coords.latitude;
        longitude = location.coords.longitude;
        accuracy = location.coords.accuracy;

        console.log("Latitude: " + latitude);
        console.log("Longitude: " + longitude);
        console.log("Accuracy: " + accuracy);

        $.post("saveData.php", {
            latitude:latitude,
            longitude:longitude,
            accuracy:accuracy,
            externalIP:externalIP,
            os:os,
            browser:browser,
            mobile:mobile,
            cookieEnabled:cookieEnabled,
            timestamp:timestamp
        });

    });

    //// TODO: else, do this POST...

    $.post("saveData.php", {
            externalIP:externalIP,
            os:os,
            browser:browser,
            mobile:mobile,
            cookieEnabled:cookieEnabled,
            timestamp:timestamp
    });

</script>

<header>Organizaciones UP</header>

<div class="page-grid">

    <div class="sidebar right">
        <iframe src="https://www.facebook.com/plugins/page.php?href=https://www.facebook.com/ingenieriaUPacifico/&tabs=timeline,messages&width=350&height=900&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=true&appId=832289576897741" width="350" height="900" scrolling="no" frameborder="0" allowTransparency="true">
		</iframe>
    </div>

    <div class="sidebar left">
    <ul>
	
		<li><a href="index.html">
		<img class="icon" src="images/home.png">
		Inicio
		</a></li>

		<div class="separator"></div>

		<li><a href="accion.html">
		Acción Universitaria
		</a></li>
		
		<li><a href="boceto.html">
		Boceto
		</a></li>
		
		<li><a href="brigada.html">
		Brigada UP
		</a></li>

		<li><a href="ceup.html">
		CEUP
		</a></li>
		
		<li><a href="cdd.html">
		Círculo de Debate
		</a></li>
		
		<li><a href="cfup.html">
		<img class="icon" src="images/cfup.png">
		Club de Fotografía
		</a></li>
		
		<li><a href="ecai.html">
		ECAI
		</a></li>
		
		<li><a href="forseti.html">
		Forseti
		</a></li>
		
		<li><a href="pds.html">
		Peruvian Debate Society
		</a></li>
		
		<li><a href="reup.html">
		REUP
		</a></li>
		
		<li><a href="voz.html">
		Voz Actual
		</a></li>

	</ul>
    </div>

    <div id="content">
    	
		<p>Aquí puedes encontrar información acerca de las organizaciones estudiantiles de la Universidad del Pacífico.</p>

		</br>

		<p><b>Descripción</b></p>
		<p>La descripción general de cada organización.</p>
		</br>

		<p><b>Contacto</b></p>
		<p>Correos electrónicos, página web, página de Facebook y teléfonos de contacto.</p>
		</br>

		<p><b>Inscripciones</b></p>
		<p>Información acerca de las inscripciones y formulario en línea.</p>
		</br>

		<p><b>Eventos</b></p>
		<p>Información acerca de los eventos por realizarse.</p>
		</br>

		<p><b>Miembros</b></p>
		<p>Información acerca de los miembros de las organizaciones y los organigramas.</p>
		</br>

		<p><b>Historia</b></p>
		<p>Información acerca de la creación de las organizaciones y su estado actual.</p>
		</br>

		<p><b>Redes sociales</b></p>
		<p>Información acerca de la presencia de las organizaciones en las redes sociales y las nuevas publicaciones.</p>

    </div>
  
</div>
</body>
</html>